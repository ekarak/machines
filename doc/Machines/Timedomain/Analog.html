<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />

	<title>Class: Machines::Timedomain::Analog</title>

	<link rel="stylesheet" href="../../rdoc.css" type="text/css" media="screen" />

	<script src="../../js/jquery.js" type="text/javascript"
		charset="utf-8"></script>
	<script src="../../js/thickbox-compressed.js" type="text/javascript"
		charset="utf-8"></script>
	<script src="../../js/quicksearch.js" type="text/javascript"
		charset="utf-8"></script>
	<script src="../../js/darkfish.js" type="text/javascript"
		charset="utf-8"></script>

</head>
<body class="class">

	<div id="metadata">
		<div id="home-metadata">
			<div id="home-section" class="section">
        <h3 class="section-header">
          <a href="../../index.html">Home</a>
          <a href="../../index.html#classes">Classes</a>
          <a href="../../index.html#methods">Methods</a>
        </h3>
			</div>
		</div>

		<div id="file-metadata">
			<div id="file-list-section" class="section">
				<h3 class="section-header">In Files</h3>
				<div class="section-body">
					<ul>
					
						<li><a href="../../lib/machines/timedomain/analog_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
							class="thickbox" title="lib/machines/timedomain/analog.rb">lib/machines/timedomain/analog.rb</a></li>
					
					</ul>
				</div>
			</div>

			
		</div>

		<div id="class-metadata">

			<!-- Parent Class -->
			
			<div id="parent-class-section" class="section">
				<h3 class="section-header">Parent</h3>
				
				<p class="link"><a href="../../Object.html">Object</a></p>
				
			</div>
			

			<!-- Namespace Contents -->
			

			<!-- Method Quickref -->
			
			<div id="method-list-section" class="section">
				<h3 class="section-header">Methods</h3>
				<ul class="link-list">
					
					<li><a href="#method-c-combine">::combine</a></li>
					
					<li><a href="#method-c-combine_to_discrete">::combine_to_discrete</a></li>
					
					<li><a href="#method-c-new">::new</a></li>
					
					<li><a href="#method-c-signals_value_calc_proc">::signals_value_calc_proc</a></li>
					
					<li><a href="#method-c-to_analog">::to_analog</a></li>
					
					<li><a href="#method-i-to_disc">#to_disc</a></li>
					
					<li><a href="#method-i-v">#v</a></li>
					
					<li><a href="#method-i-v%3D">#v=</a></li>
					
				</ul>
			</div>
			

			<!-- Included Modules -->
			
		</div>

		<div id="project-metadata">
			
			
			<div id="fileindex-section" class="section project-section">
				<h3 class="section-header">Files</h3>
				<ul>
				
					<li class="file"><a href="../../History_txt.html">History.txt</a></li>
				
					<li class="file"><a href="../../Manifest_txt.html">Manifest.txt</a></li>
				
					<li class="file"><a href="../../PostInstall_txt.html">PostInstall.txt</a></li>
				
					<li class="file"><a href="../../README_rdoc.html">README.rdoc</a></li>
				
					<li class="file"><a href="../../README_rdoc~.html">README.rdoc~</a></li>
				
					<li class="file"><a href="../../Rakefile.html">Rakefile</a></li>
				
					<li class="file"><a href="../../Rakefile~.html">Rakefile~</a></li>
				
				</ul>
			</div>
			

			<div id="classindex-section" class="section project-section">
				<h3 class="section-header">Class Index
					<span class="search-toggle"><img src="../../images/find.png"
						height="16" width="16" alt="[+]"
						title="show/hide quicksearch" /></span></h3>
				<form action="#" method="get" accept-charset="utf-8" class="initially-hidden">
				<fieldset>
					<legend>Quicksearch</legend>
					<input type="text" name="quicksearch" value=""
						class="quicksearch-field" />
				</fieldset>
				</form>

				<ul class="link-list">
				
					<li><a href="../../Machines.html">Machines</a></li>
				
					<li><a href="../../Machines/IO.html">Machines::IO</a></li>
				
					<li><a href="../../Machines/IO/IOAccess.html">Machines::IO::IOAccess</a></li>
				
					<li><a href="../../Machines/IO/ModbusSlave.html">Machines::IO::ModbusSlave</a></li>
				
					<li><a href="../../Machines/Physical.html">Machines::Physical</a></li>
				
					<li><a href="../../Machines/Physical/AnalogConstant.html">Machines::Physical::AnalogConstant</a></li>
				
					<li><a href="../../Machines/Physical/Interlock.html">Machines::Physical::Interlock</a></li>
				
					<li><a href="../../Machines/Physical/Motor.html">Machines::Physical::Motor</a></li>
				
					<li><a href="../../Machines/Physical/PID.html">Machines::Physical::PID</a></li>
				
					<li><a href="../../Machines/Physical/Valve.html">Machines::Physical::Valve</a></li>
				
					<li><a href="../../Machines/Sequences.html">Machines::Sequences</a></li>
				
					<li><a href="../../Machines/Sequences/ChooseOne.html">Machines::Sequences::ChooseOne</a></li>
				
					<li><a href="../../Machines/Sequences/InParallel.html">Machines::Sequences::InParallel</a></li>
				
					<li><a href="../../Machines/Sequences/Sequence.html">Machines::Sequences::Sequence</a></li>
				
					<li><a href="../../Machines/Sequences/StackSequence.html">Machines::Sequences::StackSequence</a></li>
				
					<li><a href="../../Machines/Sequences/Step.html">Machines::Sequences::Step</a></li>
				
					<li><a href="../../Machines/Sequences/StepBase.html">Machines::Sequences::StepBase</a></li>
				
					<li><a href="../../Machines/Sequences/WaitStep.html">Machines::Sequences::WaitStep</a></li>
				
					<li><a href="../../Machines/Timedomain.html">Machines::Timedomain</a></li>
				
					<li><a href="../../Machines/Timedomain/Analog.html">Machines::Timedomain::Analog</a></li>
				
					<li><a href="../../Machines/Timedomain/BinaryOpDiscrete.html">Machines::Timedomain::BinaryOpDiscrete</a></li>
				
					<li><a href="../../Machines/Timedomain/Discrete.html">Machines::Timedomain::Discrete</a></li>
				
					<li><a href="../../Machines/Timedomain/DiscreteBase.html">Machines::Timedomain::DiscreteBase</a></li>
				
					<li><a href="../../Machines/Timedomain/DiscreteSink.html">Machines::Timedomain::DiscreteSink</a></li>
				
					<li><a href="../../Machines/Timedomain/NegatedDiscrete.html">Machines::Timedomain::NegatedDiscrete</a></li>
				
					<li><a href="../../Machines/Timedomain/Sampler.html">Machines::Timedomain::Sampler</a></li>
				
					<li><a href="../../Machines/Timedomain/Scheduler.html">Machines::Timedomain::Scheduler</a></li>
				
					<li><a href="../../Machines/Timedomain/Scheduler/Entry.html">Machines::Timedomain::Scheduler::Entry</a></li>
				
					<li><a href="../../Machines/Timedomain/Scheduler/RealWaitPolicy.html">Machines::Timedomain::Scheduler::RealWaitPolicy</a></li>
				
					<li><a href="../../Machines/Timedomain/Scheduler/SkipWaitPolicy.html">Machines::Timedomain::Scheduler::SkipWaitPolicy</a></li>
				
					<li><a href="../../Machines/Timedomain/Timer.html">Machines::Timedomain::Timer</a></li>
				
					<li><a href="../../BeLogicalFalse.html">BeLogicalFalse</a></li>
				
					<li><a href="../../Notify.html">Notify</a></li>
				
					<li><a href="../../NotifyTestEmpty.html">NotifyTestEmpty</a></li>
				
					<li><a href="../../NotifyTestOne.html">NotifyTestOne</a></li>
				
					<li><a href="../../NotifyTestOneTwo.html">NotifyTestOneTwo</a></li>
				
					<li><a href="../../NotifyTestOneWithHandler.html">NotifyTestOneWithHandler</a></li>
				
					<li><a href="../../NotifyTestTwo.html">NotifyTestTwo</a></li>
				
					<li><a href="../../Object.html">Object</a></li>
				
				</ul>
				<div id="no-class-search-results" style="display: none;">No matching classes.</div>
			</div>

			
		</div>
	</div>

	<div id="documentation">
		<h1 class="class">Machines::Timedomain::Analog</h1>

		<div id="description">
			<p>
<a href="Analog.html">Analog</a> component FIXME: no notion of units yet
</p>

		</div>

		<!-- Constants -->
		

		<!-- Attributes -->
		
		<div id="attribute-method-details" class="method-section section">
			<h3 class="section-header">Attributes</h3>

			
			<div id="name-attribute-method" class="method-detail">
				<a name="name"></a>
				
				<a name="name="></a>
				
				<div class="method-heading attribute-method-heading">
					<span class="method-name">name</span><span
						class="attribute-access-type">[RW]</span>
				</div>

				<div class="method-description">
				
				
				
				</div>
			</div>
			
			<div id="description-attribute-method" class="method-detail">
				<a name="description"></a>
				
				<a name="description="></a>
				
				<div class="method-heading attribute-method-heading">
					<span class="method-name">description</span><span
						class="attribute-access-type">[RW]</span>
				</div>

				<div class="method-description">
				
				
				
				</div>
			</div>
			
		</div>
		

		<!-- Methods -->
		
		<div id="public-class-method-details" class="method-section section">
			<h3 class="section-header">Public Class Methods</h3>

		
			<div id="combine-method" class="method-detail ">
				<a name="method-c-combine"></a>

				<div class="method-heading">
				
					<span class="method-name">combine</span><span
						class="method-args">(*signals, &block)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
class method to combine multiple signals into a single <a
href="Analog.html">Analog</a> using the code block provided
</p>
					

					
					<div class="method-source-code"
						id="combine-source">
<pre>
    <span class="ruby-comment cmt"># File lib/machines/timedomain/analog.rb, line 36</span>
36:       <span class="ruby-keyword kw">def</span> <span class="ruby-constant">Analog</span>.<span class="ruby-identifier">combine</span>(*<span class="ruby-identifier">signals</span>, &amp;<span class="ruby-identifier">block</span>)
37:         <span class="ruby-identifier">calc_proc</span> = <span class="ruby-identifier">signals_value_calc_proc</span>(*<span class="ruby-identifier">signals</span>, &amp;<span class="ruby-identifier">block</span>)
38:         <span class="ruby-identifier">result</span> = <span class="ruby-constant">Analog</span>.<span class="ruby-identifier">new</span> <span class="ruby-identifier">calc_proc</span>.<span class="ruby-identifier">call</span>
39:         <span class="ruby-identifier">signals</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">sig</span><span class="ruby-operator">|</span>
40:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">sig</span>.<span class="ruby-identifier">respond_to?</span> <span class="ruby-value">:on_change</span>
41:             <span class="ruby-identifier">sig</span>.<span class="ruby-identifier">on_change</span> <span class="ruby-keyword kw">do</span>
42:               <span class="ruby-identifier">result</span>.<span class="ruby-identifier">v</span> = <span class="ruby-identifier">calc_proc</span>.<span class="ruby-identifier">call</span>
43:             <span class="ruby-keyword kw">end</span>
44:           <span class="ruby-keyword kw">end</span>
45:         <span class="ruby-keyword kw">end</span>
46:         <span class="ruby-identifier">result</span>
47:       <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="combine-to-discrete-method" class="method-detail ">
				<a name="method-c-combine_to_discrete"></a>

				<div class="method-heading">
				
					<span class="method-name">combine_to_discrete</span><span
						class="method-args">(*signals, &block)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
class method to combine multiple signals into a single <a
href="Discrete.html">Discrete</a> using the code block provided
</p>
					

					
					<div class="method-source-code"
						id="combine-to-discrete-source">
<pre>
    <span class="ruby-comment cmt"># File lib/machines/timedomain/analog.rb, line 50</span>
50:       <span class="ruby-keyword kw">def</span> <span class="ruby-constant">Analog</span>.<span class="ruby-identifier">combine_to_discrete</span>(*<span class="ruby-identifier">signals</span>, &amp;<span class="ruby-identifier">block</span>)
51:         <span class="ruby-identifier">calc_proc</span> = <span class="ruby-identifier">signals_value_calc_proc</span>(*<span class="ruby-identifier">signals</span>, &amp;<span class="ruby-identifier">block</span>)
52:         <span class="ruby-identifier">result</span> = <span class="ruby-constant">Discrete</span>.<span class="ruby-identifier">new</span> <span class="ruby-identifier">calc_proc</span>.<span class="ruby-identifier">call</span>
53: 
54:         <span class="ruby-identifier">signals</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">sig</span><span class="ruby-operator">|</span>
55:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">sig</span>.<span class="ruby-identifier">respond_to?</span> <span class="ruby-value">:on_change</span>
56:             <span class="ruby-identifier">sig</span>.<span class="ruby-identifier">on_change</span> <span class="ruby-keyword kw">do</span>
57:               <span class="ruby-identifier">result</span>.<span class="ruby-identifier">v</span> = <span class="ruby-identifier">calc_proc</span>.<span class="ruby-identifier">call</span>
58:             <span class="ruby-keyword kw">end</span>
59:           <span class="ruby-keyword kw">end</span>
60:         <span class="ruby-keyword kw">end</span>
61:         <span class="ruby-identifier">result</span>
62:       <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="new-method" class="method-detail ">
				<a name="method-c-new"></a>

				<div class="method-heading">
				
					<span class="method-name">new</span><span
						class="method-args">(value = nil)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
initialize an analog component with an initial value
</p>
					

					
					<div class="method-source-code"
						id="new-source">
<pre>
    <span class="ruby-comment cmt"># File lib/machines/timedomain/analog.rb, line 16</span>
16:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">value</span> = <span class="ruby-keyword kw">nil</span>)
17:         <span class="ruby-ivar">@name</span>, <span class="ruby-ivar">@description</span> = <span class="ruby-keyword kw">nil</span>
18:         <span class="ruby-ivar">@v</span> = <span class="ruby-identifier">value</span>
19:       <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="to-analog-method" class="method-detail ">
				<a name="method-c-to_analog"></a>

				<div class="method-heading">
				
					<span class="method-name">to_analog</span><span
						class="method-args">(v)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
FIXME: totally useless in my opinion
</p>
					

					
					<div class="method-source-code"
						id="to-analog-source">
<pre>
    <span class="ruby-comment cmt"># File lib/machines/timedomain/analog.rb, line 65</span>
65:       <span class="ruby-keyword kw">def</span> <span class="ruby-constant">Analog</span>.<span class="ruby-identifier">to_analog</span>(<span class="ruby-identifier">v</span>)
66:         <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">v</span>
67:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Analog</span>
68:           <span class="ruby-identifier">v</span>
69:         <span class="ruby-keyword kw">when</span> <span class="ruby-keyword kw">nil</span>
70:           <span class="ruby-identifier">v</span>
71:         <span class="ruby-keyword kw">else</span>
72:           <span class="ruby-constant">Analog</span>.<span class="ruby-identifier">new</span> <span class="ruby-identifier">v</span>
73:         <span class="ruby-keyword kw">end</span>
74:       <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
		</div>
	
		<div id="private-class-method-details" class="method-section section">
			<h3 class="section-header">Private Class Methods</h3>

		
			<div id="signals-value-calc-proc-method" class="method-detail ">
				<a name="method-c-signals_value_calc_proc"></a>

				<div class="method-heading">
				
					<span class="method-name">signals_value_calc_proc</span><span
						class="method-args">(*signals, &block)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
create a proc that will cal the block with the given signals as inputs. The
inputs are used either as values or as the  values of signals. Ie. if the
signal supports the :v method or variable, signal.v is used, otherwise,
signal itself is  used
</p>
					

					
					<div class="method-source-code"
						id="signals-value-calc-proc-source">
<pre>
     <span class="ruby-comment cmt"># File lib/machines/timedomain/analog.rb, line 126</span>
126:       <span class="ruby-keyword kw">def</span> <span class="ruby-constant">Analog</span>.<span class="ruby-identifier">signals_value_calc_proc</span>(*<span class="ruby-identifier">signals</span>, &amp;<span class="ruby-identifier">block</span>)
127:         <span class="ruby-identifier">raise</span> <span class="ruby-value str">&quot;a calculation block must be provided!&quot;</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">block</span>
128:         <span class="ruby-identifier">value_signals</span> = []
129:         <span class="ruby-identifier">signals</span>.<span class="ruby-identifier">each_with_index</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">sig</span>, <span class="ruby-identifier">ii</span><span class="ruby-operator">|</span>
130:           <span class="ruby-identifier">sig_val</span> = <span class="ruby-node">&quot;signals[#{ii}]&quot;</span> 
131:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">sig</span>.<span class="ruby-identifier">respond_to?</span> <span class="ruby-value">:v</span> <span class="ruby-keyword kw">then</span> 
132:             <span class="ruby-identifier">sig_val</span> <span class="ruby-operator">+=</span> <span class="ruby-value str">'.v'</span>
133:           <span class="ruby-keyword kw">end</span>
134:           <span class="ruby-identifier">value_signals</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">sig_val</span>
135:         <span class="ruby-keyword kw">end</span>
136:         <span class="ruby-identifier">eval</span> <span class="ruby-value str">          Proc.new { block.call(#{value_signals.join ','}) }  </span>
137:       <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
		</div>
	
		<div id="public-instance-method-details" class="method-section section">
			<h3 class="section-header">Public Instance Methods</h3>

		
			<div id="to-disc-method" class="method-detail ">
				<a name="method-i-to_disc"></a>

				<div class="method-heading">
				
					<span class="method-name">to_disc</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
map instance to discrete. Use the block provided upstream, or else  simply
store the analog value into the discrete component  FIXME: should map to
boolean 
</p>
					

					
					<div class="method-source-code"
						id="to-disc-source">
<pre>
    <span class="ruby-comment cmt"># File lib/machines/timedomain/analog.rb, line 79</span>
79:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">to_disc</span>
80:         <span class="ruby-constant">Discrete</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">tap</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">d</span><span class="ruby-operator">|</span>
81:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">block_given?</span>
82:             <span class="ruby-identifier">d</span>.<span class="ruby-identifier">v</span> = <span class="ruby-keyword kw">yield</span> <span class="ruby-identifier">v</span>
83:             <span class="ruby-identifier">on_change</span> <span class="ruby-keyword kw">do</span>
84:               <span class="ruby-identifier">d</span>.<span class="ruby-identifier">v</span> = <span class="ruby-keyword kw">yield</span> <span class="ruby-identifier">v</span>
85:             <span class="ruby-keyword kw">end</span>
86:           <span class="ruby-keyword kw">else</span>
87:             <span class="ruby-identifier">d</span>.<span class="ruby-identifier">v</span> = <span class="ruby-identifier">v</span>
88:             <span class="ruby-identifier">on_change</span> <span class="ruby-keyword kw">do</span>
89:               <span class="ruby-identifier">d</span>.<span class="ruby-identifier">v</span> = <span class="ruby-identifier">v</span>
90:             <span class="ruby-keyword kw">end</span>
91:           <span class="ruby-keyword kw">end</span>
92:         <span class="ruby-keyword kw">end</span>
93:       <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="v-method" class="method-detail ">
				<a name="method-i-v"></a>

				<div class="method-heading">
				
					<span class="method-name">v</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
return value
</p>
					

					
					<div class="method-source-code"
						id="v-source">
<pre>
    <span class="ruby-comment cmt"># File lib/machines/timedomain/analog.rb, line 31</span>
31:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">v</span>
32:         <span class="ruby-ivar">@v</span>
33:       <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="v--method" class="method-detail ">
				<a name="method-i-v%3D"></a>

				<div class="method-heading">
				
					<span class="method-name">v=</span><span
						class="method-args">(val)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
set new value, fire notification if changed, return value
</p>
					

					
					<div class="method-source-code"
						id="v--source">
<pre>
    <span class="ruby-comment cmt"># File lib/machines/timedomain/analog.rb, line 22</span>
22:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">v=</span>(<span class="ruby-identifier">val</span>)
23:         <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@v</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">val</span>
24:           <span class="ruby-ivar">@v</span> = <span class="ruby-identifier">val</span>
25:           <span class="ruby-identifier">notify_change</span>
26:         <span class="ruby-keyword kw">end</span>
27:         <span class="ruby-ivar">@v</span>
28:       <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
		</div>
	

	</div>


	<div id="rdoc-debugging-section-dump" class="debugging-section">
	
		<p>Disabled; run with --debug to generate this.</p>
	
	</div>

	<div id="validator-badges">
		<p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
		<p><small>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish
			Rdoc Generator</a> 1.1.6</small>.</p>
	</div>

</body>
</html>

